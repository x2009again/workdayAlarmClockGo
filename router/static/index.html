<html>
<head>
    <title>工作咩闹钟</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="linemode">
        <img src="/favicon.ico" width="100px"><br><br>
        <h1>工作咩闹钟</h1>
    </div>
    <br>
    <div class="linemode">
        <form action="/stop">
            <button type="submit">停止</button>
        </form>
        <form action="/pause">
            <button type="submit">暂停</button>
        </form>
        <form action="/resume">
            <button type="submit">恢复播放</button>
        </form>
    </div><br>
    <div class="linemode">
        <form action="/volm">
            <button type="submit">音量减</button>
        </form>
        <form action="/volp">
            <button type="submit">音量加</button>
        </form>
        <form action="/next">
            <button type="submit">下一首</button>
        </form>
    </div>
    <form action="/play" id="playUrlForm">
        <button type="submit">播放url</button>
        <input type="text" name="url" id="playUrl" value="http://music.163.com/song/media/outer/url?id=29019010.mp3">
    </form>
    <form action="/playlist" onsubmit="return plalist()">
        <button type="submit">播放歌单/歌曲</button>
        <input type="text" name="id" id="playlistId" placeholder="歌单id或分享链接" value="21777546">
        <select name="random">
            <option value="0">顺序播放</option>
            <option value="1">随机播放</option>
        </select>
    </form>
    <form action="/restart">
        <button type="submit">重启</button> <a href="/alarm.html" style="margin-left: 20px">闹钟设置</a>
    </form>
    <script>
        function plalist() {
            let m = /playlist\?id=(\d+)/.exec(document.getElementById('playlistId').value);
            if (m) {
                // 歌单分享链接
                document.getElementById('playlistId').value = m[1];
            } else {
                let m = /song\?id=(\d+)/.exec(document.getElementById('playlistId').value);
                if (m) {
                    // 歌曲分享链接
                    document.getElementById('playUrl').value = "http://music.163.com/song/media/outer/url?id=" + m[1];
                    document.getElementById('playUrlForm').submit();
                    return false
                }
            }
            return true;
        }
    </script>
</body>
</html>
